import{E as g,S as m,F as b,V as c,H as y,a as h,W as p,M as E,P as R}from"./babylon-BERa1MPn.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();async function T(){const d=document.getElementById("canvas"),r=new g(d,!0),s=new m(r);new b("camera",new c(0,0,0),s);const l=new y("light",new c(0,1,0),s);l.intensity=1;const t=await s.createDefaultXRExperienceAsync({uiOptions:{sessionMode:"immersive-ar",referenceSpaceType:"unbounded"},optionalFeatures:!0});let e=null,o=!1;e=(await h.ImportMeshAsync("","./","arm_chair__furniture.glb",s)).meshes[0],e.setEnabled(!1),t.baseExperience.sessionManager.onXRSessionInit.add(()=>{console.log("AR Session started!");const u=t.baseExperience.featuresManager;try{const a=u.enableFeature(p.IMAGE_TRACKING,"latest",{images:[{src:"./furniture.jpg",estimatedRealWorldWidth:.085}]},!1,!1);a&&(console.log("Image tracking available!"),a.onTrackedImageUpdatedObservable.add(n=>{if(!e)return;const i=n.realWorldTransform;i&&(e.setEnabled(!0),o=!0,e.position.copyFrom(i.position),e.rotationQuaternion=i.rotationQuaternion,e.scaling.setAll(.1))}))}catch{console.log("Image tracking not supported, using hit-test fallback")}try{const a=u.enableFeature(p.HIT_TEST,"latest",{offsetRay:{origin:{x:0,y:0,z:0},direction:{x:0,y:0,z:-1}}});if(a){console.log("Hit-test enabled for surface placement");const n=E.CreateTorus("indicator",{diameter:.15,thickness:.01},s);n.isVisible=!1,a.onHitTestResultObservable.add(i=>{if(i.length){const f=i[0];n.isVisible=!0,n.position=f.position,n.rotationQuaternion=f.rotationQuaternion}else n.isVisible=!1}),s.onPointerObservable.add(i=>{i.type===R.POINTERDOWN&&(n.isVisible&&!o?(e.setEnabled(!0),e.position=n.position.clone(),e.rotationQuaternion=n.rotationQuaternion.clone(),e.scaling.setAll(.1),o=!0,n.isVisible=!1,console.log("Model placed on surface!")):o&&(e.rotation.y+=.4))})}}catch{console.log("Hit-test not available, using direct placement"),setTimeout(()=>{!o&&e&&(e.setEnabled(!0),e.position=new c(0,0,-1.5),e.scaling.setAll(.1),o=!0,console.log("Model placed at fixed position"))},2e3)}}),s.onBeforeRenderObservable.add(()=>{o&&e&&(e.position.y+=Math.sin(performance.now()*.002)*.001)}),r.runRenderLoop(()=>s.render()),window.addEventListener("resize",()=>r.resize()),console.log("AR ready. Tap the AR button to start!")}T();
//# sourceMappingURL=index-B_75CXab.js.map
